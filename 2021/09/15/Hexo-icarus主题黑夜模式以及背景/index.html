<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo-icarus主题黑夜模式以及背景 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="对主题增改代码实现夜间模式，以及模式切换。夜间模式增加使用canvas绘图的背景。 对更新时需要备份的代码文件作记录（大改过的都要）。">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo-icarus主题黑夜模式以及背景">
<meta property="og:url" content="http://example.com/2021/09/15/Hexo-icarus%E4%B8%BB%E9%A2%98%E9%BB%91%E5%A4%9C%E6%A8%A1%E5%BC%8F%E4%BB%A5%E5%8F%8A%E8%83%8C%E6%99%AF/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="对主题增改代码实现夜间模式，以及模式切换。夜间模式增加使用canvas绘图的背景。 对更新时需要备份的代码文件作记录（大改过的都要）。">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-09-15T00:00:00.000Z">
<meta property="article:modified_time" content="2023-02-23T18:59:23.717Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="blog">
<meta name="twitter:card" content="summary">
  
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Hexo-icarus主题黑夜模式以及背景" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/09/15/Hexo-icarus%E4%B8%BB%E9%A2%98%E9%BB%91%E5%A4%9C%E6%A8%A1%E5%BC%8F%E4%BB%A5%E5%8F%8A%E8%83%8C%E6%99%AF/" class="article-date">
  <time datetime="2021-09-15T00:00:00.000Z" itemprop="datePublished">2021-09-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/blog/">blog</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Hexo-icarus主题黑夜模式以及背景
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>对主题增改代码实现夜间模式，以及模式切换。夜间模式增加使用canvas绘图的背景。</p>
<p>对更新时需要备份的代码文件作记录（大改过的都要）。</p>
<span id="more"></span>

<p>因为我不会写<del>前端</del>（我不会写代码，我是弱智），写得很烂（这玩意标准怎么乱七八糟的），东拼西凑 Ctrl+CV 整好了，为了避免下次更新把这一块更挂掉，所以都得记录下来。</p>
<h2 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h2><p><code>icarus</code> 也可能是 <code>node_modules/hexo-theme-icarus</code> 文件夹</p>
<ul>
<li><p>在 <code>icarus/source/js</code> 下增加 <code>night.js</code></p>
</li>
<li><p>在 <code>icarus/source/css</code> 下增加 <code>night.styl</code> </p>
</li>
<li><p>在 <code>icarus/source/css</code> 下修改 <code>default.styl</code> ，末尾新增一行 <code>@import &#39;night&#39;</code> </p>
</li>
<li><p>在 <code>icarus/layout/common</code> 下修改 <code>scripts.jsx</code> 在 <code>&lt;Fragment&gt;</code> 标签间添加 <code>&lt;script&gt;</code> 标签索引</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&#123;url_for(&#x27;/js/night.js&#x27;)&#125; defer=&#123;true&#125;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>在<code>icarus/layout/common</code> 下修改 <code>navbar.jsx</code> 与 <code>footer.jsx</code></li>
</ul>
<p>大改的见下代码增改各分段的代码。</p>
<h2 id="代码增改"><a href="#代码增改" class="headerlink" title="代码增改"></a>代码增改</h2><h3 id="night-js"><a href="#night-js" class="headerlink" title="night.js"></a>night.js</h3><figure class="highlight javascript"><figcaption><span>night.js >folded</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> isNight = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;night&#x27;</span>);</span><br><span class="line">  <span class="keyword">var</span> nightNav;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">applyNight</span>(<span class="params">value</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (value.<span class="title function_">toString</span>() === <span class="string">&#x27;true&#x27;</span>) &#123;</span><br><span class="line">          <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;light&#x27;</span>);</span><br><span class="line">          <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;night&#x27;</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;night&#x27;</span>);</span><br><span class="line">          <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;light&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">findNightNav</span>(<span class="params"></span>) &#123;</span><br><span class="line">      nightNav = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;night-nav&#x27;</span>);</span><br><span class="line">      <span class="keyword">if</span> (!nightNav) &#123;</span><br><span class="line">          <span class="built_in">setTimeout</span>(findNightNav, <span class="number">100</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          nightNav.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, switchNight);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">switchNight</span>(<span class="params"></span>) &#123;</span><br><span class="line">      isNight = isNight ? isNight.<span class="title function_">toString</span>() !== <span class="string">&#x27;true&#x27;</span> : <span class="literal">true</span>;</span><br><span class="line">      <span class="title function_">applyNight</span>(isNight);</span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;night&#x27;</span>, isNight);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">findNightNav</span>();</span><br><span class="line">  isNight &amp;&amp; <span class="title function_">applyNight</span>(isNight);</span><br><span class="line">&#125;());</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="night-styl"><a href="#night-styl" class="headerlink" title="night.styl"></a>night.styl</h3><figure class="highlight css"><figcaption><span>night.styl >folded</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">dark-primary-<span class="attribute">color</span> = rgb(<span class="number">55</span>, <span class="number">61</span>, <span class="number">72</span>)</span><br><span class="line">dark-primary-<span class="attribute">color</span>-hover = rgb(<span class="number">67</span>, <span class="number">74</span>, <span class="number">86</span>)</span><br><span class="line">dark-primary-<span class="attribute">color</span>-active = rgb(<span class="number">44</span>, <span class="number">49</span>, <span class="number">58</span>)</span><br><span class="line">dark-<span class="attribute">font</span>-<span class="attribute">color</span> = <span class="selector-id">#c0c0c0</span></span><br><span class="line"></span><br><span class="line"><span class="selector-id">#universe</span></span><br><span class="line">    <span class="attribute">display</span>: none</span><br><span class="line"></span><br><span class="line">.navbar-logo,</span><br><span class="line">.footer-logo</span><br><span class="line">    .logo-img-dark</span><br><span class="line">        display: none</span><br><span class="line"></span><br><span class="line"><span class="built_in">night</span>()</span><br><span class="line">    background: <span class="number">#0e1225</span></span><br><span class="line"></span><br><span class="line">    // code highlight (https://cdnjs.cloudflare.com/ajax/libs/highlight.js/<span class="number">9.12</span>.<span class="number">0</span>/styles/atom-one-dark.min.css)</span><br><span class="line">    .hljs&#123;<span class="attribute">display</span>:block;<span class="attribute">overflow-x</span>:auto;<span class="attribute">padding</span>:<span class="number">0.5em</span>;<span class="attribute">color</span>:<span class="number">#abb2bf</span>;<span class="attribute">background</span>:<span class="number">#282c34</span>&#125;<span class="selector-class">.hljs-comment</span>,<span class="selector-class">.hljs-quote</span>&#123;<span class="attribute">color</span>:<span class="number">#5c6370</span>;<span class="attribute">font-style</span>:italic&#125;<span class="selector-class">.hljs-doctag</span>,<span class="selector-class">.hljs-keyword</span>,<span class="selector-class">.hljs-formula</span>&#123;<span class="attribute">color</span>:<span class="number">#c678dd</span>&#125;<span class="selector-class">.hljs-section</span>,<span class="selector-class">.hljs-name</span>,<span class="selector-class">.hljs-selector-tag</span>,<span class="selector-class">.hljs-deletion</span>,<span class="selector-class">.hljs-subst</span>&#123;<span class="attribute">color</span>:<span class="number">#e06c75</span>&#125;<span class="selector-class">.hljs-literal</span>&#123;<span class="attribute">color</span>:<span class="number">#56b6c2</span>&#125;<span class="selector-class">.hljs-string</span>,<span class="selector-class">.hljs-regexp</span>,<span class="selector-class">.hljs-addition</span>,<span class="selector-class">.hljs-attribute</span>,<span class="selector-class">.hljs-meta-string</span>&#123;<span class="attribute">color</span>:<span class="number">#98c379</span>&#125;<span class="selector-class">.hljs-built_in</span>,<span class="selector-class">.hljs-class</span> <span class="selector-class">.hljs-title</span>&#123;<span class="attribute">color</span>:<span class="number">#e6c07b</span>&#125;<span class="selector-class">.hljs-attr</span>,<span class="selector-class">.hljs-variable</span>,<span class="selector-class">.hljs-template-variable</span>,<span class="selector-class">.hljs-type</span>,<span class="selector-class">.hljs-selector-class</span>,<span class="selector-class">.hljs-selector-attr</span>,<span class="selector-class">.hljs-selector-pseudo</span>,<span class="selector-class">.hljs-number</span>&#123;<span class="attribute">color</span>:<span class="number">#d19a66</span>&#125;<span class="selector-class">.hljs-symbol</span>,<span class="selector-class">.hljs-bullet</span>,<span class="selector-class">.hljs-link</span>,<span class="selector-class">.hljs-meta</span>,<span class="selector-class">.hljs-selector-id</span>,<span class="selector-class">.hljs-title</span>&#123;<span class="attribute">color</span>:<span class="number">#61aeee</span>&#125;<span class="selector-class">.hljs-emphasis</span>&#123;<span class="attribute">font-style</span>:italic&#125;<span class="selector-class">.hljs-strong</span>&#123;<span class="attribute">font-weight</span>:bold&#125;<span class="selector-class">.hljs-link</span>&#123;<span class="attribute">text-decoration</span>:underline&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="selector-class">.content</span> <span class="selector-tag">code</span></span><br><span class="line">        <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">203</span>,<span class="number">186</span>,<span class="number">125</span>)</span><br><span class="line">    </span><br><span class="line">    // night icon changed to fas fa-sun</span><br><span class="line">    #night-nav #night-icon:before</span><br><span class="line">        content: <span class="string">&#x27;\f185&#x27;</span></span><br><span class="line">    </span><br><span class="line">    // global background</span><br><span class="line">    #universe</span><br><span class="line">        background: <span class="built_in">radial-gradient</span>(<span class="number">1600px</span> at <span class="number">70%</span> <span class="number">120%</span>, <span class="number">#212750</span> <span class="number">10%</span>, <span class="number">#020409</span> <span class="number">100%</span>)</span><br><span class="line">        display: block</span><br><span class="line">        position: fixed</span><br><span class="line">        margin: <span class="number">0</span></span><br><span class="line">        padding: <span class="number">0</span></span><br><span class="line">        border: <span class="number">0</span></span><br><span class="line">        outline: <span class="number">0</span></span><br><span class="line">        left: <span class="number">0</span></span><br><span class="line">        top: <span class="number">0</span></span><br><span class="line">        width: <span class="number">100%</span></span><br><span class="line">        height: <span class="number">100%</span></span><br><span class="line">        pointer-events: none</span><br><span class="line">    </span><br><span class="line">    // global brightness</span><br><span class="line">    img, video, iframe, .waifu, .donate</span><br><span class="line">        filter: <span class="built_in">brightness</span>(<span class="number">0.8</span>)</span><br><span class="line">        -webkit-filter: <span class="built_in">brightness</span>(<span class="number">0.8</span>)</span><br><span class="line">    </span><br><span class="line">    // logo</span><br><span class="line">    .navbar-logo,</span><br><span class="line">    .footer-logo</span><br><span class="line">        .logo-img</span><br><span class="line">            display: none</span><br><span class="line">        .logo-img-dark</span><br><span class="line">            display: inline-block</span><br><span class="line">    </span><br><span class="line">    // navigation bar, cards</span><br><span class="line">    .navbar-main .navbar-menu .navbar-item</span><br><span class="line">        &amp;:hover,</span><br><span class="line">        &amp;:focus</span><br><span class="line">            color: <span class="number">#ffffff</span></span><br><span class="line">            background-color: dark-primary-color</span><br><span class="line">    .navbar,</span><br><span class="line">    .card</span><br><span class="line">        background-color: <span class="built_in">rgba</span>(<span class="number">40</span>,<span class="number">44</span>,<span class="number">52</span>,<span class="number">0.5</span>)</span><br><span class="line">        backdrop-filter: none</span><br><span class="line">        -webkit-backdrop-filter: none</span><br><span class="line">    .card</span><br><span class="line">        &amp;:hover</span><br><span class="line">            background-color: <span class="built_in">rgba</span>(<span class="number">40</span>,<span class="number">44</span>,<span class="number">52</span>,<span class="number">0.8</span>)</span><br><span class="line">    .footer</span><br><span class="line">        backdrop-filter: none</span><br><span class="line">        -webkit-backdrop-filter: none</span><br><span class="line">        &amp;:before</span><br><span class="line">            background-color: <span class="built_in">rgba</span>(<span class="number">40</span>,<span class="number">44</span>,<span class="number">52</span>,<span class="number">0.5</span>)</span><br><span class="line">    </span><br><span class="line">    // input</span><br><span class="line">    .input, .textarea</span><br><span class="line">        background-color: dark-primary-color-hover</span><br><span class="line">        border-color: dark-primary-color</span><br><span class="line">    </span><br><span class="line">    // button</span><br><span class="line">    .button.is-primary, .button.is-light, .button.is-small</span><br><span class="line">        background-color: dark-primary-color</span><br><span class="line">        color: dark-font-color</span><br><span class="line">        &amp;:hover, &amp;.is-hovered</span><br><span class="line">            color: <span class="number">#ffffff</span></span><br><span class="line">            background-color: dark-primary-color-hover</span><br><span class="line">        &amp;:active, &amp;.is-active</span><br><span class="line">            color: <span class="number">#ffffff</span></span><br><span class="line">            background-color: dark-primary-color-active</span><br><span class="line">    .button.is-white,</span><br><span class="line">    .button.is-transparent</span><br><span class="line">        background-color: transparent</span><br><span class="line">        &amp;:hover</span><br><span class="line">            background-color: dark-primary-color <span class="meta">!important</span></span><br><span class="line">    .pagination .pagination-next,</span><br><span class="line">    .pagination .pagination-previous</span><br><span class="line">    .pagination-link:<span class="built_in">not</span>(.is-current)</span><br><span class="line">        color: dark-font-color</span><br><span class="line">        background-color: dark-primary-color</span><br><span class="line">        a</span><br><span class="line">            color: dark-font-color</span><br><span class="line">    .pagination-link.is-current</span><br><span class="line">        background-color: dark-primary-color-hover</span><br><span class="line">        border-color: dark-primary-color-hover</span><br><span class="line">    </span><br><span class="line">    // comment</span><br><span class="line">    .v .vwrap,</span><br><span class="line">    .v .vwrap .vheader .vinput</span><br><span class="line">        border-color: dark-primary-color</span><br><span class="line">    .v .vwrap .vheader .vinput:focus</span><br><span class="line">        border-color: dark-primary-color-hover</span><br><span class="line">    .v .vbtn</span><br><span class="line">        color: dark-font-color</span><br><span class="line">        background-color: dark-primary-color</span><br><span class="line">        border-color: dark-primary-color</span><br><span class="line">        &amp;:hover</span><br><span class="line">            background-color: dark-primary-color-hover</span><br><span class="line">        &amp;:active</span><br><span class="line">            background-color: dark-primary-color-active</span><br><span class="line">    .v .vlist .vcard .vhead .vsys</span><br><span class="line">        background-color: dark-primary-color</span><br><span class="line">    .v a:hover,</span><br><span class="line">    .v .vlist .vcard .vh .vmeta .vat</span><br><span class="line">        color: <span class="number">#ffffff</span></span><br><span class="line">    .v .vlist .vcard .vcontent.expand:before</span><br><span class="line">        background: <span class="built_in">-webkit-gradient</span>(linear,left top,left bottom,<span class="built_in">from</span>(<span class="built_in">rgba</span>(<span class="number">37</span>,<span class="number">41</span>,<span class="number">54</span>,<span class="number">0</span>)),<span class="built_in">to</span>(<span class="built_in">rgba</span>(<span class="number">37</span>,<span class="number">41</span>,<span class="number">54</span>,<span class="number">1</span>)))</span><br><span class="line">        background: <span class="built_in">linear-gradient</span>(<span class="number">180deg</span>,<span class="built_in">rgba</span>(<span class="number">37</span>,<span class="number">41</span>,<span class="number">54</span>,<span class="number">0</span>),<span class="built_in">rgba</span>(<span class="number">37</span>,<span class="number">41</span>,<span class="number">54</span>,<span class="number">1</span>))</span><br><span class="line">    .v .vlist .vcard .vcontent.expand:after</span><br><span class="line">        background: <span class="built_in">rgba</span>(<span class="number">37</span>,<span class="number">41</span>,<span class="number">54</span>,<span class="number">1</span>)</span><br><span class="line">    .v .vlist .vcard .vh,</span><br><span class="line">    .v .vlist .vcard .vquote</span><br><span class="line">        border-color: dark-primary-color-hover</span><br><span class="line">    .v code,</span><br><span class="line">    .v pre</span><br><span class="line">        background-color: transparent</span><br><span class="line">    </span><br><span class="line">    // font color</span><br><span class="line">    body,</span><br><span class="line">    strong,</span><br><span class="line">    time,</span><br><span class="line">    .title,</span><br><span class="line">    .footer,</span><br><span class="line">    .card,</span><br><span class="line">    .content h1,</span><br><span class="line">    .content h2,</span><br><span class="line">    .content h3,</span><br><span class="line">    .content h4,</span><br><span class="line">    .content h5,</span><br><span class="line">    .content h6,</span><br><span class="line">    .navbar-item,</span><br><span class="line">    .navbar-item.is-active,</span><br><span class="line">    .navbar-link,</span><br><span class="line">    .menu-list a,</span><br><span class="line">    .menu-label,</span><br><span class="line">    .level-item,</span><br><span class="line">    .input,</span><br><span class="line">    .textarea,</span><br><span class="line">    .button.is-white,</span><br><span class="line">    .button.is-transparent,</span><br><span class="line">    .article-licensing,</span><br><span class="line">    .v *</span><br><span class="line">        color: dark-font-color</span><br><span class="line">    .media-content,</span><br><span class="line">    .has-text-grey,</span><br><span class="line">    .link-muted</span><br><span class="line">        color: dark-font-color <span class="meta">!important</span></span><br><span class="line">    a</span><br><span class="line">        color: <span class="built_in">rgb</span>(<span class="number">82</span>, <span class="number">153</span>, <span class="number">224</span>)</span><br><span class="line">        &amp;:hover</span><br><span class="line">            color: <span class="number">#ffffff</span></span><br><span class="line">    .timeline a,</span><br><span class="line">    [data-type=<span class="string">&quot;recent-posts&quot;</span>] a</span><br><span class="line">        color: dark-font-color</span><br><span class="line">        &amp;:hover</span><br><span class="line">            color: <span class="number">#ffffff</span></span><br><span class="line">    </span><br><span class="line">    // quote</span><br><span class="line">    .content blockquote,</span><br><span class="line">    .article-licensing</span><br><span class="line">        background-color: dark-primary-color</span><br><span class="line">        border-color: dark-primary-color-hover</span><br><span class="line">    </span><br><span class="line">    // table</span><br><span class="line">    .content table thead td,</span><br><span class="line">    .content table thead th</span><br><span class="line">        color: dark-font-color</span><br><span class="line">    .content table td,</span><br><span class="line">    .content table th</span><br><span class="line">        border-color: dark-primary-color-hover</span><br><span class="line">    </span><br><span class="line">    // break line</span><br><span class="line">    hr</span><br><span class="line">        background-color: dark-primary-color-hover</span><br><span class="line">    </span><br><span class="line">    // tags and menus</span><br><span class="line">    article.article, article.media</span><br><span class="line">        .title a</span><br><span class="line">            background-image: <span class="built_in">linear-gradient</span>(transparent <span class="built_in">calc</span>(<span class="number">100%</span> - <span class="number">1px</span>), dark-font-color <span class="number">1px</span>)</span><br><span class="line">        .title:hover a</span><br><span class="line">            // override anotherr <span class="meta">!important</span></span><br><span class="line">            color: dark-font-color <span class="meta">!important</span></span><br><span class="line">    .tag:<span class="built_in">not</span>(body)</span><br><span class="line">        color: dark-font-color</span><br><span class="line">        background-color: dark-primary-color</span><br><span class="line">    .widget .tags .tag:first-child,</span><br><span class="line">    .tag.is-grey</span><br><span class="line">        background-color: dark-primary-color-hover</span><br><span class="line">    .menu-list a:hover</span><br><span class="line">        background-color: dark-primary-color</span><br><span class="line">    .menu-list a.is-active</span><br><span class="line">        background-color: dark-primary-color-hover</span><br><span class="line">    .menu-list li ul</span><br><span class="line">        border-color: dark-primary-color</span><br><span class="line">    </span><br><span class="line">    // time line</span><br><span class="line">    .timeline .media:last-child:after</span><br><span class="line">        background-color: <span class="built_in">rgb</span>(<span class="number">37</span>,<span class="number">41</span>,<span class="number">54</span>)</span><br><span class="line">    .timeline</span><br><span class="line">        border-color: dark-primary-color-hover</span><br><span class="line">    .timeline .media:before</span><br><span class="line">        background-color: dark-primary-color-hover</span><br><span class="line">    </span><br><span class="line">    // search box</span><br><span class="line">    .searchbox</span><br><span class="line">        .searchbox-container,</span><br><span class="line">        .searchbox-header,</span><br><span class="line">        .searchbox-header .searchbox-input,</span><br><span class="line">        .searchbox-header .searchbox-close,</span><br><span class="line">        .searchbox-body,</span><br><span class="line">        .searchbox-result-section,</span><br><span class="line">        .searchbox-result-item</span><br><span class="line">            color: dark-font-color</span><br><span class="line">            background-color: dark-primary-color</span><br><span class="line">            border-color: dark-primary-color-hover</span><br><span class="line">        .searchbox-container .searchbox-result-section .searchbox-result-item:hover,</span><br><span class="line">        .searchbox-container .searchbox-result-section .searchbox-result-item.active,</span><br><span class="line">        .searchbox-container .searchbox-header .searchbox-close:hover</span><br><span class="line">            color: <span class="number">#ffffff</span></span><br><span class="line">            background-color: dark-primary-color-hover</span><br><span class="line">    </span><br><span class="line">    // selection</span><br><span class="line">    ::selection</span><br><span class="line">        color: <span class="number">#ffffff</span></span><br><span class="line">        background-color: <span class="built_in">rgba</span>(<span class="number">52</span>,<span class="number">109</span>,<span class="number">167</span>,<span class="number">0.8</span>)</span><br><span class="line">    ::-moz-selection</span><br><span class="line">        color: <span class="number">#ffffff</span></span><br><span class="line">        background-color: <span class="built_in">rgba</span>(<span class="number">52</span>,<span class="number">109</span>,<span class="number">167</span>,<span class="number">0.8</span>)</span><br><span class="line">    </span><br><span class="line">    input:-webkit-autofill</span><br><span class="line">        -webkit-text-fill-color: dark-font-color <span class="meta">!important</span></span><br><span class="line">        box-shadow: <span class="number">0</span> <span class="number">0</span> <span class="number">0px</span> <span class="number">1000px</span> dark-primary-color inset</span><br><span class="line">    </span><br><span class="line">    // twikoo</span><br><span class="line">    .twikoo</span><br><span class="line">        pre</span><br><span class="line">            background-color: dark-primary-color</span><br><span class="line">        code</span><br><span class="line">            color: <span class="built_in">rgb</span>(<span class="number">203</span>,<span class="number">186</span>,<span class="number">125</span>)</span><br><span class="line">            background-color: dark-primary-color</span><br><span class="line"></span><br><span class="line">body.night</span><br><span class="line">    <span class="built_in">night</span>()</span><br><span class="line"></span><br><span class="line">@media (prefers-color-scheme: dark)</span><br><span class="line">    body:<span class="built_in">not</span>(.light)</span><br><span class="line">        <span class="built_in">night</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="navbar-amp-footer-jsx"><a href="#navbar-amp-footer-jsx" class="headerlink" title="navbar &amp; footer.jsx"></a>navbar &amp; footer.jsx</h3><p>对 <code>navbar.jsx</code> 和 <code>footer.jsx</code> 的修改差不多</p>
<p>添加logo的两种模式，主题配置处也要相应改变为<code>logo: logo.light</code> 和 <code>logo.dark</code> 两个分项</p>
<ul>
<li><p><code>render()&#123;const&#125;</code> 下将 <code>logoUrl</code> 改为 <code>logoLightUrl</code>，<code>logoDarkUrl</code>。</p>
</li>
<li><p><code>let navbarLogo =&#39;&#39;</code> 的第一个 <code>else</code> 添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">navbarLogo = [</span><br><span class="line">                    &lt;img class=&quot;logo-img&quot; src=&#123;logoLightUrl&#125; alt=&#123;siteTitle&#125; height=&quot;28&quot; /&gt;,</span><br><span class="line">                    &lt;img class=&quot;logo-img-dark&quot; src=&#123;logoDarkUrl&#125; alt=&#123;siteTitle&#125; height=&quot;28&quot; /&gt;</span><br><span class="line">                ];</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 <code>return</code> 标签内，<code>&#123;showtoc&#125;</code> 前添加黑夜切换图标的链接，切回白天的图标在 <code>night.styl</code> 里设置，图标都是用的 <code>fontawesome-icon</code>-免费图标。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;a class=&quot;navbar-item night&quot; id=&quot;night-nav&quot; title=&quot;Night Mode&quot; href=&quot;javascript:;&quot;&gt;</span><br><span class="line">	&lt;i class=&quot;fas fa-moon&quot; id=&quot;night-icon&quot;&gt;&lt;/i&gt;</span><br><span class="line">&lt;/a&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>module.exports</code> 添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const logoLight = logo instanceof String ? logo : logo.light</span><br><span class="line">const logoDark = logo instanceof String ? logo : logo.dark</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>return</code> 修改 <code>logoUrl</code> 为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">logoLightUrl: url_for(logoLight),</span><br><span class="line">logoDarkUrl: url_for(logoDark),</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="添加夜空流星背景"><a href="#添加夜空流星背景" class="headerlink" title="添加夜空流星背景"></a>添加夜空流星背景</h2><ul>
<li>在 <code>icarus/source/js</code> 下增加 <code>universe.js</code></li>
</ul>
<figure class="highlight javascript"><figcaption><span>universe.js >folded</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * created by lvfan</span></span><br><span class="line"><span class="comment"> * 2018-09-04</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">(<span class="keyword">function</span> <span class="title function_">drawBg</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span> = <span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span> || <span class="variable language_">window</span>.<span class="property">mozRequestAnimationFrame</span> ||</span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">webkitRequestAnimationFrame</span> || <span class="variable language_">window</span>.<span class="property">msRequestAnimationFrame</span>;</span><br><span class="line">    <span class="comment">// const</span></span><br><span class="line">    <span class="keyword">var</span> starDensity = <span class="number">0.216</span>;</span><br><span class="line">    <span class="keyword">var</span> speedCoeff = <span class="number">0.05</span>;</span><br><span class="line">    <span class="keyword">var</span> canva = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;universe&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// let</span></span><br><span class="line">    <span class="keyword">var</span> width;</span><br><span class="line">    <span class="keyword">var</span> height;</span><br><span class="line">    <span class="keyword">var</span> starCount;</span><br><span class="line">    <span class="comment">/* no-unused-vars */</span></span><br><span class="line">    <span class="comment">// var circleRadius;</span></span><br><span class="line">    <span class="comment">// var circleCenter;</span></span><br><span class="line">    <span class="keyword">var</span> first = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">var</span> giantColor = <span class="string">&#x27;180,184,240&#x27;</span>;</span><br><span class="line">    <span class="keyword">var</span> starColor = <span class="string">&#x27;226,225,142&#x27;</span>;</span><br><span class="line">    <span class="keyword">var</span> cometColor = <span class="string">&#x27;226,225,224&#x27;</span>;</span><br><span class="line">    <span class="keyword">var</span> stars = [];</span><br><span class="line">    <span class="keyword">var</span> universe;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">windowResizeHandler</span>();</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, windowResizeHandler, <span class="literal">false</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">windowResizeHandler</span>(<span class="params"></span>) &#123;</span><br><span class="line">        width = <span class="variable language_">window</span>.<span class="property">innerWidth</span>;</span><br><span class="line">        height = <span class="variable language_">window</span>.<span class="property">innerHeight</span>;</span><br><span class="line">        starCount = width * starDensity;</span><br><span class="line">        <span class="comment">// circleRadius = (width &gt; height ? height / 2 : width / 2);</span></span><br><span class="line">        <span class="comment">// circleCenter = &#123;</span></span><br><span class="line">        <span class="comment">//   x: width / 2,</span></span><br><span class="line">        <span class="comment">//   y: height / 2</span></span><br><span class="line">        <span class="comment">// &#125;;</span></span><br><span class="line">        canva.<span class="title function_">setAttribute</span>(<span class="string">&#x27;width&#x27;</span>, width);</span><br><span class="line">        canva.<span class="title function_">setAttribute</span>(<span class="string">&#x27;height&#x27;</span>, height);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">createUniverse</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">createUniverse</span>(<span class="params"></span>) &#123;</span><br><span class="line">        universe = canva.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; starCount; i++) &#123;</span><br><span class="line">            stars[i] = <span class="keyword">new</span> <span class="title class_">Star</span>();</span><br><span class="line">            stars[i].<span class="title function_">reset</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">draw</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">draw</span>(<span class="params"></span>) &#123;</span><br><span class="line">        universe.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">        <span class="keyword">var</span> starsLength = stars.<span class="property">length</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; starsLength; i++) &#123;</span><br><span class="line">            <span class="keyword">var</span> star = stars[i];</span><br><span class="line">            star.<span class="title function_">move</span>();</span><br><span class="line">            star.<span class="title function_">fadeIn</span>();</span><br><span class="line">            star.<span class="title function_">fadeOut</span>();</span><br><span class="line">            star.<span class="title function_">draw</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">Star</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">reset</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">giant</span> = <span class="title function_">getProbability</span>(<span class="number">3</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">comet</span> = <span class="variable language_">this</span>.<span class="property">giant</span> || first ? <span class="literal">false</span> : <span class="title function_">getProbability</span>(<span class="number">10</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">x</span> = <span class="title function_">getRandInterval</span>(<span class="number">0</span>, width - <span class="number">10</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">y</span> = <span class="title function_">getRandInterval</span>(<span class="number">0</span>, height);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">r</span> = <span class="title function_">getRandInterval</span>(<span class="number">1.1</span>, <span class="number">2.6</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">dx</span> = <span class="title function_">getRandInterval</span>(speedCoeff, <span class="number">6</span> * speedCoeff) + (<span class="variable language_">this</span>.<span class="property">comet</span> + <span class="number">1</span> - <span class="number">1</span>) * speedCoeff * <span class="title function_">getRandInterval</span>(<span class="number">50</span>, <span class="number">120</span>) + speedCoeff * <span class="number">2</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">dy</span> = -<span class="title function_">getRandInterval</span>(speedCoeff, <span class="number">6</span> * speedCoeff) - (<span class="variable language_">this</span>.<span class="property">comet</span> + <span class="number">1</span> - <span class="number">1</span>) * speedCoeff * <span class="title function_">getRandInterval</span>(<span class="number">50</span>, <span class="number">120</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fadingOut</span> = <span class="literal">null</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fadingIn</span> = <span class="literal">true</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">opacity</span> = <span class="number">0</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">opacityTresh</span> = <span class="title function_">getRandInterval</span>(<span class="number">0.2</span>, <span class="number">1</span> - (<span class="variable language_">this</span>.<span class="property">comet</span> + <span class="number">1</span> - <span class="number">1</span>) * <span class="number">0.4</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">do</span> = <span class="title function_">getRandInterval</span>(<span class="number">0.0005</span>, <span class="number">0.002</span>) + (<span class="variable language_">this</span>.<span class="property">comet</span> + <span class="number">1</span> - <span class="number">1</span>) * <span class="number">0.001</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">fadeIn</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">fadingIn</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">fadingIn</span> = !(<span class="variable language_">this</span>.<span class="property">opacity</span> &gt; <span class="variable language_">this</span>.<span class="property">opacityTresh</span>);</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">opacity</span> += <span class="variable language_">this</span>.<span class="property">do</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">fadeOut</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">fadingOut</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">fadingOut</span> = !(<span class="variable language_">this</span>.<span class="property">opacity</span> &lt; <span class="number">0</span>);</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">opacity</span> -= <span class="variable language_">this</span>.<span class="property">do</span> / <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">x</span> &gt; width || <span class="variable language_">this</span>.<span class="property">y</span> &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="property">fadingOut</span> = <span class="literal">false</span>;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">reset</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">draw</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            universe.<span class="title function_">beginPath</span>();</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">giant</span>) &#123;</span><br><span class="line">                universe.<span class="property">fillStyle</span> = <span class="string">&#x27;rgba(&#x27;</span> + giantColor + <span class="string">&#x27;,&#x27;</span> + <span class="variable language_">this</span>.<span class="property">opacity</span> + <span class="string">&#x27;)&#x27;</span>;</span><br><span class="line">                universe.<span class="title function_">arc</span>(<span class="variable language_">this</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">y</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>, <span class="literal">false</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">comet</span>) &#123;</span><br><span class="line">                universe.<span class="property">fillStyle</span> = <span class="string">&#x27;rgba(&#x27;</span> + cometColor + <span class="string">&#x27;,&#x27;</span> + <span class="variable language_">this</span>.<span class="property">opacity</span> + <span class="string">&#x27;)&#x27;</span>;</span><br><span class="line">                universe.<span class="title function_">arc</span>(<span class="variable language_">this</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">y</span>, <span class="number">1.5</span>, <span class="number">0</span>, <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>, <span class="literal">false</span>);</span><br><span class="line">                <span class="comment">// comet tail</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">30</span>; i++) &#123;</span><br><span class="line">                    universe.<span class="property">fillStyle</span> = <span class="string">&#x27;rgba(&#x27;</span> + cometColor + <span class="string">&#x27;,&#x27;</span> + (<span class="variable language_">this</span>.<span class="property">opacity</span> - (<span class="variable language_">this</span>.<span class="property">opacity</span> / <span class="number">20</span>) * i) + <span class="string">&#x27;)&#x27;</span>;</span><br><span class="line">                    universe.<span class="title function_">rect</span>(<span class="variable language_">this</span>.<span class="property">x</span> - <span class="variable language_">this</span>.<span class="property">dx</span> / <span class="number">4</span> * i, <span class="variable language_">this</span>.<span class="property">y</span> - <span class="variable language_">this</span>.<span class="property">dy</span> / <span class="number">4</span> * i - <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line">                    universe.<span class="title function_">fill</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                universe.<span class="property">fillStyle</span> = <span class="string">&#x27;rgba(&#x27;</span> + starColor + <span class="string">&#x27;,&#x27;</span> + <span class="variable language_">this</span>.<span class="property">opacity</span> + <span class="string">&#x27;)&#x27;</span>;</span><br><span class="line">                universe.<span class="title function_">rect</span>(<span class="variable language_">this</span>.<span class="property">x</span>, <span class="variable language_">this</span>.<span class="property">y</span>, <span class="variable language_">this</span>.<span class="property">r</span>, <span class="variable language_">this</span>.<span class="property">r</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            universe.<span class="title function_">closePath</span>();</span><br><span class="line">            universe.<span class="title function_">fill</span>();</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">move</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">x</span> += <span class="variable language_">this</span>.<span class="property">dx</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">y</span> += <span class="variable language_">this</span>.<span class="property">dy</span>;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">fadingOut</span> === <span class="literal">false</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">reset</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">x</span> &gt; width - (width / <span class="number">4</span>) || <span class="variable language_">this</span>.<span class="property">y</span> &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">fadingOut</span> = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                first = <span class="literal">false</span>;</span><br><span class="line">            &#125;, <span class="number">50</span>);</span><br><span class="line">        &#125;)();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">getProbability</span>(<span class="params">percents</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> ((<span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">1000</span>) + <span class="number">1</span>) &lt; percents * <span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">getRandInterval</span>(<span class="params">min, max</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="title class_">Math</span>.<span class="title function_">random</span>() * (max - min) + min);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/* ---------------------------------</span></span><br><span class="line"><span class="comment">     *        www.imaegoo.com</span></span><br><span class="line"><span class="comment">     *     NO DRAW IN LIGHT MODE</span></span><br><span class="line"><span class="comment">     * --------------------------------- */</span></span><br><span class="line">    (<span class="keyword">function</span> <span class="title function_">imaegoo</span> () &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;night&#x27;</span>)) &#123;</span><br><span class="line">            <span class="title function_">draw</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">requestAnimationFrame</span>(imaegoo);</span><br><span class="line">    &#125;)();</span><br><span class="line">&#125;());</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>修改 <code>layout/layout.jsx</code> ，添加<code>canvas</code> 和星空绘图的<code>script</code> 路径</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;body class=&#123;&#125;&gt;</span><br><span class="line">    &lt;script ......&gt;&lt;/script&gt;</span><br><span class="line">    &lt;canvas id=&quot;universe&quot;&gt;&lt;/canvas&gt;</span><br><span class="line">    ...</span><br><span class="line">    ...</span><br><span class="line">    ...</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot; src=&quot;/js/universe.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>



<h2 id="添加日间模式背景"><a href="#添加日间模式背景" class="headerlink" title="添加日间模式背景"></a>添加日间模式背景</h2><p>方案有几种，我选最懒的改最少代码的。由于是日间模式的背景图片，而 <code>navbar</code> 和 <code>footer</code> 的透明度不是100%（懒得改了），所以背景尽量是上下白色的比较合适，同时不要太大，影响加载，随便挑一张。</p>
<ul>
<li><p>图片塞进 <code>icarus\theme\source\img</code> 里。</p>
</li>
<li><p>修改 <code>icarus\source\css</code> <code>icarus\include\style\base.style</code> 反正 <code>body</code> 的样式在哪就修改哪里。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span></span><br><span class="line">	<span class="comment">/*添加下列代码*/</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">../img/mount.jpg</span>) no-repeat</span><br><span class="line">    background-attachment: fixed</span><br><span class="line">    background-size: cover</span><br></pre></td></tr></table></figure>
</li>
<li><p>随便写一个不包括上级目录的路径，发现返回 <code>404 not found /css/path/background.jpg</code> ，说明索引目录在 <code>icarus\source\css</code> ，照着写相对路径即可。</p>
</li>
<li><p>background的属性主要要写好</p>
<ul>
<li><code>url</code> 图片路径（网络路径也可以，API也可以），</li>
<li><code>attachment</code> 是否滚动：<code>fixed</code> 不滚动，<code>scoll</code> 滚动，</li>
<li><code>size</code> 图像的大小：原始尺寸 <code>auto</code> ，覆盖容器 <code>cover</code> ，拉伸以显示全图 <code>contain</code> 等，</li>
<li>如果图片够大，什么 <code>position</code> ，<code>clip</code> 都可以不管了，适配需要的话再查，添加即可。</li>
</ul>
</li>
</ul>
<h2 id="备份列表"><a href="#备份列表" class="headerlink" title="备份列表"></a>备份列表</h2><p>但我好像已经都 <code>git</code> 到 <code>github</code> 的私有仓库上了。</p>
<ul>
<li><code>icarus\source\js\night.js</code></li>
<li><code>icarus\source\css\night.styl</code></li>
<li><code>icarus\layout\common\navbar.jsx</code></li>
<li><code>icarus\layout\common\footer.jsx</code></li>
<li><code>icarus\source\js\universe.js</code></li>
<li><code>icarus\theme\source\img</code></li>
</ul>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p>cdnjs-开源前端库文件：<a target="_blank" rel="noopener" href="https://cdnjs.com/">https://cdnjs.com/</a></p>
<p>highlight.js-代码块样式：<a target="_blank" rel="noopener" href="https://highlightjs.org/">https://highlightjs.org/</a></p>
<p>fontawesome-icon-免费图标：<a target="_blank" rel="noopener" href="https://fontawesome.com/icons">https://fontawesome.com/icons</a></p>
<p>icarus夜间主题配置：<a target="_blank" rel="noopener" href="http://blog.sbx0.cn/2020/04/07/icarus-3-night-mode/">http://blog.sbx0.cn/2020/04/07/icarus-3-night-mode/</a></p>
<p>icarus 4 配置夜间模式：<a target="_blank" rel="noopener" href="https://blog.asahih.com/hexo-icarus-night-mode/">https://blog.asahih.com/hexo-icarus-night-mode/</a></p>
<p>support night dark mode：<a target="_blank" rel="noopener" href="https://github.com/ppoffice/hexo-theme-icarus/issues/564">https://github.com/ppoffice/hexo-theme-icarus/issues/564</a></p>
<p>hexo-theme-icarus 3 食用经验分享：<a target="_blank" rel="noopener" href="https://www.imaegoo.com/2020/icarus-3-guide/">https://www.imaegoo.com/2020/icarus-3-guide/</a></p>
<p>如何给 Icarus 增加夜间模式：<a target="_blank" rel="noopener" href="https://www.imaegoo.com/2019/icarus-night-mode-2/">https://www.imaegoo.com/2019/icarus-night-mode-2/</a></p>
<p>icarus-一个hexo主题美化过程：<a target="_blank" rel="noopener" href="https://purplezi.gitee.io/2021/01/15/icarus/">https://purplezi.gitee.io/2021/01/15/icarus/</a></p>
<p>icarus-github-issues主题背景 #612：<a target="_blank" rel="noopener" href="https://github.com/ppoffice/hexo-theme-icarus/issues/612">https://github.com/ppoffice/hexo-theme-icarus/issues/612</a></p>
<p>W3Schools-background：<a target="_blank" rel="noopener" href="https://www.w3schools.com/css/css_background.asp">https://www.w3schools.com/css/css_background.asp</a></p>
<p>W3Schools-background-properties：<a target="_blank" rel="noopener" href="https://www.w3schools.com/cssref/css3_pr_background.asp">https://www.w3schools.com/cssref/css3_pr_background.asp</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/09/15/Hexo-icarus%E4%B8%BB%E9%A2%98%E9%BB%91%E5%A4%9C%E6%A8%A1%E5%BC%8F%E4%BB%A5%E5%8F%8A%E8%83%8C%E6%99%AF/" data-id="clehgxuvn000gd9p315zkahwv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/blog/" rel="tag">blog</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/09/28/docker%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          docker入门笔记
        
      </div>
    </a>
  
  
    <a href="/2021/09/09/switch%E7%A0%B4%E8%A7%A3%E6%8C%87%E5%8D%97/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">switch破解指南</div>
    </a>
  
</nav>

  
</article>

</section>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>