<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>也无风雨也无晴</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="也无风雨也无晴"><meta name="msapplication-TileImage" content="/logo/logo.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="也无风雨也无晴"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="NAS的必要性及可行性 NAS是什么NAS是一种存储文件的技术，一般来说，有DAS、NAS和SAN三种。基于windows、linux等的开放系统服务器的外挂存储一般有直连存储(Direct-Attached Storage)和网络化存储。 网络化存储(Fabric-Attached Storage)根据传输协议分为：网络接入存储(Network-Attached Storage)和存储区域网络("><meta property="og:type" content="blog"><meta property="og:title" content="也无风雨也无晴"><meta property="og:url" content="http://example.com/cache/NAS%E7%9A%84%E5%BF%85%E8%A6%81%E6%80%A7%E5%8F%8A%E5%8F%AF%E8%A1%8C%E6%80%A7.html"><meta property="og:site_name" content="也无风雨也无晴"><meta property="og:description" content="NAS的必要性及可行性 NAS是什么NAS是一种存储文件的技术，一般来说，有DAS、NAS和SAN三种。基于windows、linux等的开放系统服务器的外挂存储一般有直连存储(Direct-Attached Storage)和网络化存储。 网络化存储(Fabric-Attached Storage)根据传输协议分为：网络接入存储(Network-Attached Storage)和存储区域网络("><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://example.com/img/og_image.png"><meta property="article:published_time" content="2022-02-23T14:17:19.939Z"><meta property="article:modified_time" content="2022-02-23T14:17:19.939Z"><meta property="article:author" content="戴闻濠"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com/cache/NAS%E7%9A%84%E5%BF%85%E8%A6%81%E6%80%A7%E5%8F%8A%E5%8F%AF%E8%A1%8C%E6%80%A7.html"},"headline":"也无风雨也无晴","image":["http://example.com/img/og_image.png"],"datePublished":"2022-02-23T14:17:19.939Z","dateModified":"2022-02-23T14:17:19.939Z","author":{"@type":"Person","name":"ivy"},"publisher":{"@type":"Organization","name":"也无风雨也无晴","logo":{"@type":"ImageObject","url":{"light":"/logo/logo_light.svg","dark":"/logo/logo_dark.svg"}}},"description":"NAS的必要性及可行性 NAS是什么NAS是一种存储文件的技术，一般来说，有DAS、NAS和SAN三种。基于windows、linux等的开放系统服务器的外挂存储一般有直连存储(Direct-Attached Storage)和网络化存储。 网络化存储(Fabric-Attached Storage)根据传输协议分为：网络接入存储(Network-Attached Storage)和存储区域网络("}</script><link rel="canonical" href="http://example.com/cache/NAS%E7%9A%84%E5%BF%85%E8%A6%81%E6%80%A7%E5%8F%8A%E5%8F%AF%E8%A1%8C%E6%80%A7.html"><link rel="icon" href="/logo/logo.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.2"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/%5Bobject%20Object%5D" alt="也无风雨也无晴" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">时间</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a><a class="navbar-item" href="/talktalk">瞎扯</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/scutLMG"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="content"><p>NAS的必要性及可行性</p>
<h1 id="NAS是什么"><a href="#NAS是什么" class="headerlink" title="NAS是什么"></a>NAS是什么</h1><p>NAS是一种存储文件的技术，一般来说，有DAS、NAS和SAN三种。基于windows、linux等的开放系统服务器的外挂存储一般有直连存储(Direct-Attached Storage)和网络化存储。</p>
<p>网络化存储(Fabric-Attached Storage)根据传输协议分为：网络接入存储(Network-Attached Storage)和存储区域网络(Storage Area Network)。</p>
<p>下面一笔带过。</p>
<h2 id="DAS"><a href="#DAS" class="headerlink" title="DAS"></a>DAS</h2><p>直连式存储（Direct-Attached Storage），存储设备直接通过线缆挂载到服务器上，比如外置硬盘柜。DAS方案一般有RAID（独立硬盘冗余阵列Redundant Array of Independent Disks）和JBOD（就是一堆硬盘！Just a Bunch Of Disks）</p>
<p>这样的方式，要求每一个服务器都需要配备存储设备，对于多服务器网络系统来说，效率很低。</p>
<h2 id="SAN"><a href="#SAN" class="headerlink" title="SAN"></a>SAN</h2><p>存储区域网络（Storage Area Network），独立于TCP/IP网络外的专用存储区域网络，扩展性很强。</p>
<p>例子就是一大堆磁盘柜，通过SAN交换机与服务器通信。个人一般用不上。就是，文件存储服务器构成的局域网。</p>
<h2 id="NAS"><a href="#NAS" class="headerlink" title="NAS"></a>NAS</h2><p>网络接入存储（Network-Attached Storage），将存储设备通过标准的网络拓扑结构（例如以太网），连接到一群计算机上。实现的是文件级别的共享 ，是一种带有瘦服务器（网络文件服务器）的存储设备，链接到TCP/IP网络上。比较适合个人使用。不过因为通过网络传输，所以需要占用网络带宽，同时有数据安全问题。</p>
<p>例子就是文件存储服务器开启网络共享。</p>
<h1 id="NAS可以干什么"><a href="#NAS可以干什么" class="headerlink" title="NAS可以干什么"></a>NAS可以干什么</h1><p>NAS主要就是作为一个7×24小时在线的存储服务器，在内网，配合软路由，高速网口，可以实现快速的文件交互，如果是AIO或者搭配HTPC等，就可以进行影音的快速解码查看。</p>
<p>同时，NAS可以作为一个个人的文件备份服务器，随时随地访问，支持多种终端的访问。不过在外网需要做好公网IP或者内网穿透。</p>
<p>也可以在NAS上安装软件，如下载工具，作为一个下载机。或者作为一个服务器，建站。</p>
<h1 id="NAS与AIO的比较"><a href="#NAS与AIO的比较" class="headerlink" title="NAS与AIO的比较"></a>NAS与AIO的比较</h1><p>AIO即是All in One，把所有的功能集中在一台服务器上，什么NAS、软路由、HTPC等等。看似很美好，但是个人觉得可用性并不多。</p>
<p>首先是安全性，AIO有一个弊端就是：One bomb, all bomb。一旦有一点问题，那么挂载的所有服务都会挂掉，从这点来看，我觉得还是功能之间分开或者作有限的结合比较好。比如nas是7×24运行，但如HTPC只是固定或偶然时间使用的，做在一起就不太合适了。</p>
<p>第二点是功耗的问题。NAS的商业产品都把功耗做得很低，个人DIY也需要留意功耗的问题。而组建AIO则对性能提出了要求，性能的提升必然带来功耗的增加，特别是AIO的很多服务并不需要不间断在线，这时性能又大大冗余了，感觉并不是很划算，不过功耗也不会增加太多，算是一个考虑的次要点。</p>
<h1 id="NAS的必要性"><a href="#NAS的必要性" class="headerlink" title="NAS的必要性"></a>NAS的必要性</h1><p>首先还是要回归功能。首要的功能就是存储备份。实际上个人的数据到现在我也没有太多需要备份，不爱拍照，重要文件就那么点，每次换手机虽然很不舍得，但是还是会把用不上的数据断舍离。而且即使存在组了阵列的nas上的数据也是有丢失的风险的。最重要的文件肯定是需要冷备份加多份备份的。确实很重要的，不如买个千年盘刻录好（=。=）不过nas确实可以预留个1T作为个人数据、多终端数据的同步。毕竟我萌生组建NAS的念头是毕业前夕论文还没交的时候，硬盘出了连续的坏块，差点就无了（点名批评笔记本2.5寸都是叠瓦盘！So WD, fuck you！）</p>
<p>其次就是NAS的附加功能了，一般是音视频流。搭配下载机，可以存放很多电影，对于我来说，即使存放了很多电影，也不算重要的数据，那么这一块数据在NAS上应该也是以Basic的方式储存的。音乐方面，确实有收集的意愿，可以算一个理由。而音乐普通的压缩无损最大也就20M，有个1T已经能存放很多了。</p>
<p>最后是服务，建站的话，只要一个小博客，如果需要挂载在上面，还要做好内网穿透，小水管一样带宽，实在是不怎么地。不过有一定的可行性，虽然还是白嫖github比较划算。另外一个功能就是我看到觉得还不错的，就是电子书、笔记的多终端交互，个人知识库的构建。这些文本文件并不需要大带宽支持传输，内网穿透搭的小水管也是可行的。这个服务需求可以搭一个试试看是否有必要性。另外，既然可以建站，那么挂载一些小型服务也是可行的，挂几个爬虫，数据就存里面，也很便捷。</p>
<h1 id="组建NAS的要点"><a href="#组建NAS的要点" class="headerlink" title="组建NAS的要点"></a>组建NAS的要点</h1><h2 id="组建方式的考查"><a href="#组建方式的考查" class="headerlink" title="组建方式的考查"></a>组建方式的考查</h2><p>主要就是直接买还是DIY。直接买的成品如群晖、铁威马、威联通等等，看起来都是高价低配，虽然确实不需要拿来做什么性能消耗很大的事情，但2000+买一个J1900级别的服务器，确实很难接受，成品NAS的价值，主要在于服务，厂家提供良好的服务支持，稳定的硬件服务，以及数据安全的持续保障，还有如群晖提供了速度还不错的外网访问。但我觉得外网的大流量传输并不是我个人的一个必不可少的需求，所以还是倾向与DIY，等真的形成依赖，有需要在买也不迟。</p>
<p>DIY方面，要学习和留意的地方就相对较多了。硬件的功耗、性能都是需要考量的。使用怎样的系统，应用支持的程度也是一个重点。</p>
<h2 id="NAS系统的比对"><a href="#NAS系统的比对" class="headerlink" title="NAS系统的比对"></a>NAS系统的比对</h2><p>黑群晖、unraid、freenas、PVE等。</p>
<h2 id="功耗"><a href="#功耗" class="headerlink" title="功耗"></a>功耗</h2><p>功耗计算，忽视峰谷电与阶梯，以电费平均一度0.6元计。每高10W的功耗，每年的电费增加10 × 24 × 365 × 0.6 ÷ 1000 = 52.6元。</p>
<p>每挂载一个3.5寸的机械硬盘，大约增加6-8W。</p>
<p>所以CPU的功耗性能比要高，功耗要低。</p>
<h2 id="性能"><a href="#性能" class="headerlink" title="性能"></a>性能</h2><h2 id="CPU的选取"><a href="#CPU的选取" class="headerlink" title="CPU的选取"></a>CPU的选取</h2><h2 id="网口"><a href="#网口" class="headerlink" title="网口"></a>网口</h2><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>硬件直通的问题，硬件直通的支持影响到硬件性能的释放和效率。</p>
<p>解码能力。</p>
<p>是否需要7×24在线，还是说经常休眠，使用WakeOnLan唤醒等。</p>
<p>安全性，自组NAS并暴露端口到公网，怎样不成为肉鸡是一个重要的问题！</p>
<p>软路由的必要性。</p>
</div><!--!--></article></div><!--!--><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/./logo/mao.jpg" alt="戴闻濠"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">戴闻濠</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">13</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">7</p></a></div></div></nav><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/scutLMG"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Wechat" href="https://facebook.com"><i class="fab fa-weixin"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="QQ" href="https://twitter.com"><i class="fab fa-qq"></i></a></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/07/"><span class="level-start"><span class="level-item">七月 2021</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/06/"><span class="level-start"><span class="level-item">六月 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/10/"><span class="level-start"><span class="level-item">十月 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><figure class="media-left"><a class="image" href="/2021/07/15/hexo%E6%8C%87%E5%8C%972/"><img src="/tn/tn_mao.jpg" alt="Hexo使用说明书2"></a></figure><div class="media-content"><p class="date"><time dateTime="2021-07-14T16:00:00.000Z">2021-07-15</time></p><p class="title"><a href="/2021/07/15/hexo%E6%8C%87%E5%8C%972/">Hexo使用说明书2</a></p><p class="categories"><a href="/categories/blog/">blog</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2021/07/15/hexo-use/"><img src="/tn/tn_mao.jpg" alt="Hexo食用指北"></a></figure><div class="media-content"><p class="date"><time dateTime="2021-07-14T16:00:00.000Z">2021-07-15</time></p><p class="title"><a href="/2021/07/15/hexo-use/">Hexo食用指北</a></p><p class="categories"><a href="/categories/blog/">blog</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2021/07/15/%E6%97%A5%E9%BA%BB%E5%85%A5%E9%97%A8/"><img src="/tn/tn_mj1.jpg" alt="日麻入门"></a></figure><div class="media-content"><p class="date"><time dateTime="2021-07-14T16:00:00.000Z">2021-07-15</time></p><p class="title"><a href="/2021/07/15/%E6%97%A5%E9%BA%BB%E5%85%A5%E9%97%A8/">日麻入门</a></p><p class="categories"><a href="/categories/game/">game</a> / <a href="/categories/game/mahjong/">mahjong</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2021/07/01/%E6%9E%84%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%95%B0%E6%8D%AE%E5%BA%93/"><img src="/tn/tn_mao.jpg" alt="利用github构建静态博客数据库"></a></figure><div class="media-content"><p class="date"><time dateTime="2021-06-30T16:00:00.000Z">2021-07-01</time></p><p class="title"><a href="/2021/07/01/%E6%9E%84%E5%BB%BA%E5%8D%9A%E5%AE%A2%E6%95%B0%E6%8D%AE%E5%BA%93/">利用github构建静态博客数据库</a></p><p class="categories"><a href="/categories/blog/">blog</a> / <a href="/categories/cs/">cs</a> / <a href="/categories/cs/front-end/">front-end</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2021/07/01/welcome/"><img src="/tn/tn_panda.jpg" alt="Welcome"></a></figure><div class="media-content"><p class="date"><time dateTime="2021-06-30T16:00:00.000Z">2021-07-01</time></p><p class="title"><a href="/2021/07/01/welcome/">Welcome</a></p><p class="categories"><a href="/categories/blog/">blog</a></p></div></article></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/%5Bobject%20Object%5D" alt="也无风雨也无晴" height="28"></a><p class="is-size-7"><span>&copy; 2022 ivy</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="GitHub" href="https://github.com/scutLMG"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.9/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>